<app-layout-header></app-layout-header>
<div class="MainBodyPart">

    <div class="col-md-9" ng-if="vm.corridorData">

        <div class="col-md-7 pad-right-30 no-left-padding no-right-padding">
          <div class="corridor-filters corridor-legend legend-content-size">
            <ul class="list-group">
              <li class="list-group-item" *ngFor="let user of corridorPersons">{{user}}
                <!-- <corridor-legend-item user="user" class="mar" ng-class="{trial: vm.organization.trial}"></corridor-legend-item> -->
              </li>
            </ul>
          </div>
        </div>
      <div class="form-group w-50">
      <li *ngIf="organization.trial" class="form-group w-50"></li>
        <li *ngIf="!organization.trial" class="form-group w-50">
          <select
            class="form-select"
            name="department"
            id="department"
            formControlName="department"
          >
            <option
              *ngFor="let department of departments"
              value="{department.uuid}"
            >
              {{ department.name }}
            </option>
          </select>
        </li>
      </div>



        <div class="col-md-4 col-md-offset-1 no-left-padding no-right-padding">
          <div class="corridor-filters legend-content-size">
            <div class="form-group">
              <div class="dropdown width-75">
                <a role="button" data-toggle="dropdown" class="btn btn-default" data-target="#">
                  <div class="relative">
                    <!-- <div class="hidden-overflow input-with-icon-ellipsis selected">
                      {{departmentName}}
                    </div> -->
                    <div class="icon icon-arrow-down icon-dropdown absolute-on-right"></div>
                  </div>
                </a>
                <!-- <ul class="dropdown-menu scroll-option multi-level" role="menu" aria-labelledby="dropdownMenu">
                  <li ng-if="vm.organization.trial" translate="trial.notAvailable"></li>
                  <li ng-if="!vm.organization.trial"><a ng-click="vm.setDepartment('*', 'All departments')" ng-class="{active: vm.department == '*'}">All departments</a></li>
                  <li ng-if="!vm.organization.trial" ng-repeat="department in vm.departments"><a ng-click="vm.setDepartment(department.uuid, department.name)" ng-class="{active: vm.department == department.uuid}">{{department.name}}</a></li>
                </ul> -->
                <br>
              </div>
            </div>
            <div class="form-group">
              <div class="dropdown width-75">
                <a role="button" data-toggle="dropdown" class="btn btn-default" data-target="#">
                  <div class="relative">
                    <div class="hidden-overflow input-with-icon-ellipsis" ng-class="{selected: vm.sourceName}">
                      <!-- {{ vm.sourceName? vm.sourceName : ('Employees' | uppercase) }} -->
                    </div>
                    <div class="icon icon-arrow-down icon-dropdown absolute-on-right"></div>
                  </div>
                </a>
                <ul class="dropdown-menu scroll-option-typehead" role="menu" aria-labelledby="dropdownMenu">
                  <li ng-if="vm.organization.trial" translate="trial.notAvailable"></li>
                  <input ng-if="!vm.organization.trial" class="categories-typeahead" ng-model="vm.selected" type="text" uib-typeahead="userName as user.fullName for user in vm.departmentUsers(vm.department) | filter:$viewValue"
                    typeahead-on-select="vm.setSource($item.uuid, $item.fullName)" />
                  <li ng-if="!vm.organization.trial" ng-if="vm.selected === ''">
                    <a ng-click="vm.setSource(vm.EMPLOYEES, vm.EMPLOYEES.capitalize())" translate="employees" class="text-capitalize" ng-class="{active: vm.source == vm.EMPLOYEES}"></a>
                  </li>
                  <li ng-if="!vm.organization.trial" ng-if="vm.selected === ''" ng-repeat="user in vm.departmentUsers(vm.department)"><a ng-click="vm.setSource(user.uuid, user.fullName)" ng-class="{active: vm.source == user.uuid}">{{user.fullName}}</a></li>
                </ul>
                <br>
              </div>
            </div>
          </div>
        </div>


        <div class="col-md-12" ng-if="vm.corridorData">
          <div class="row corridor-area corridor-graph">
            <div class="corridor-background"></div>
            <div class="individual-section-background">
              <div class="corridor-horizontal-label ">{{'graphic.individual' | translate}}</div>
            </div>
            <div class="central-section-background"></div>
            <div class="colective-section-background">
              <div class="corridor-horizontal-label ">{{'graphic.collective' | translate}}</div>
            </div>
            <div class="points-label">{{'graphic.points' | translate}}</div>
            <corridor-graph corridor="vm.corridorData" persons="vm.corridorPersons" trial="vm.organization.trial"></corridor-graph>

          </div>
        </div>

      </div>

</div>