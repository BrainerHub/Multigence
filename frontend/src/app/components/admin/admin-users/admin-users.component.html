<app-layout-header></app-layout-header>
<div class="progress-footer FooterTop text-center">
  <a href="admin">{{ "admin.catalog" | translate }}</a>

  <div class="progress-chart">
    <div class="progress">
      <div class="pending" role="progressbar" style="width: 33%" data-toggle="tooltip" data-placement="top"
        title="{{ 'progress.pending' | translate }}"></div>
      <div class="progressing" role="progressbar" style="width: 33%" data-toggle="tooltip" data-placement="top"
        title="{{ 'progress.progressing' | translate }}"></div>
      <div class="finished" role="progressbar" style="width: 34%" data-toggle="tooltip" data-placement="top"
        title="{{ 'progress.finished' | translate }}"></div>
    </div>
  </div>
</div>
<div class="MainBodyPart">
  <div class="container-fluid">
    <div class="AdminUser">
      <div class="row">
        <div class="col-md-3">
          <div>
            <div class="right-inner-addon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="15px" height="15px" fill="#eee">
                <path
                    d="M 21 3 C 11.601563 3 4 10.601563 4 20 C 4 29.398438 11.601563 37 21 37 C 24.355469 37 27.460938 36.015625 30.09375 34.34375 L 42.375 46.625 L 46.625 42.375 L 34.5 30.28125 C 36.679688 27.421875 38 23.878906 38 20 C 38 10.601563 30.398438 3 21 3 Z M 21 7 C 28.199219 7 34 12.800781 34 20 C 34 27.199219 28.199219 33 21 33 C 13.800781 33 8 27.199219 8 20 C 8 12.800781 13.800781 7 21 7 Z" />
              </svg>
              <input class="form-control form-control-outline custom-search"
                placeholder="{{ 'filter.search' | translate }}" type="text" name="search" [(ngModel)]="searchText"
                autocomplete="off" />
            </div>
            <div class="FilterBox">
              <div class="AdminSubTitle">PROGRESS</div>
              <div class="FilterBoxInner">
                <div class="container-fluid">
                  <div class="row align-items-center mb-3" *ngFor="let status of statusList; let i = index">
                    <div class="col-10 pe-0 ps-0">
                      <div class="checkbox m-0">
                        <input type="checkbox" [checked]="filters.status[status] || false"
                          (change)="onChecked($event, status, 'status')" id="status{{ i }}" name="status{{ i }}" />
                        <label for="progress-pending">{{ status }}</label>
                      </div>
                    </div>
                    <div class="col-2 ps-0 text-end">
                      <p>({{ counters?.progress[status] || 0 }})</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="FilterBox">
              <div class="AdminSubTitle">COMPANY</div>
              <div class="FilterBoxInner">
                <div class="container-fluid">
                  <div class="row align-items-center mb-3" *ngFor="let company of companyList; let i = index">
                    <div class="col-10 pe-0 ps-0">
                      <div class="checkbox m-0">
                        <input type="checkbox" [checked]="filters.company[company.uuid] || false" name="company{{ i }}"
                          id="company{{ i }}" (change)="onChecked($event, company.uuid, 'company')" />
                        <label class="text-capitalize">{{
                          company.name
                          }}</label>
                      </div>
                    </div>
                    <div class="col-2 ps-0 text-end">
                      <p>({{ counters.company[company.uuid] || 0 }})</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="FilterBox">
              <div class="AdminSubTitle">DEPARTMENT</div>
              <div class="FilterBoxInner">
                <div class="container-fluid">
                  <div class="row align-items-center mb-3" *ngFor="let department of departments; let i = index">
                    <div class="col-10 pe-0 ps-0">
                      <div class="checkbox m-0">
                        <input type="checkbox" [checked]="
                            filters.department[department.uuid] || false
                          " name="department{{ i }}" id="department{{ i }}" (change)="
                            onChecked($event, department.uuid, 'department')
                          " />
                        <label class="text-capitalize">{{
                          department.name
                          }}</label>
                      </div>
                    </div>
                    <div class="col-2 ps-0 text-end">
                      <p>({{ counters.department[department.uuid] || 0 }})</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="FilterBox">
              <div class="AdminSubTitle">ROLE</div>
              <div class="FilterBoxInner">
                <div class="container-fluid">
                  <div class="row align-items-center mb-3" *ngFor="let role of roleList; let i = index">
                    <div class="col-10 pe-0 ps-0">
                      <div class="checkbox m-0">
                        <input type="checkbox" [checked]="filters.role[role] || false"
                          (change)="onChecked($event, role, 'role')" id="role{{ i }}" name="role{{ i }}" />
                        <label for="role-manager">{{ role }}</label>
                      </div>
                    </div>
                    <div class="col-2 ps-0 text-end">
                      <p>({{ counters?.role.MANAGER || 0 }})</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-9">
          <div class="container">
            <div class="UserTable table-hover">
              <div class="">
                <div class="Custompagination p-0">
                  <ul class="pagination">
                    <li class="page-item">
                      <a class="page-link Previous-page" aria-label="Previous">
                        <span class="LeftBorderPage bi bi-send"></span>
                      </a>
                    </li>
                    <li class="page-item">
                      <a class="page-link Previous-page" aria-label="Previous">
                        <span class="bi bi-send"></span>
                      </a>
                    </li>
                    <li class="page-item">
                      <a class="page-link active">001</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link Next-page" aria-label="Next">
                        <span class="bi bi-send"></span>
                      </a>
                    </li>
                    <li class="page-item">
                      <a class="page-link Next-page" aria-label="Next">
                        <span class="bi bi-send RightBorderPage"></span>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="scrollTable">
                <table class="table table-dark">
                  <thead>
                    <tr>
                      <th scope="col">
                        <div class="d-flex align-items-center gap-2"></div>
                      </th>
                      <th scope="col">
                        <div class="d-flex align-items-center gap-2">
                          FIRST NAME
                          <div>
                            <div>
                              <i class="my-icon fa fa-chevron-up" (click)="onSortTableData($event)"></i>
                            </div>
                            <div>
                              <i class="my-icon fa fa-chevron-down" (click)="onSortTableData($event)"></i>
                            </div>
                          </div>
                        </div>
                      </th>
                      <th scope="col">
                        <div class="d-flex align-items-center gap-2">
                          LAST NAME
                          <div>
                            <div>
                              <i class="my-icon fa fa-chevron-up" (click)="onSortTableData($event)"></i>
                            </div>
                            <div>
                              <i class="my-icon fa fa-chevron-down" (click)="onSortTableData($event)"></i>
                            </div>
                          </div>
                        </div>
                      </th>
                      <th scope="col">
                        <div class="d-flex align-items-center gap-2">
                          COMPANY
                          <div>
                            <div>
                              <i class="my-icon fa fa-chevron-up" (click)="onSortTableData($event)"></i>
                            </div>
                            <div>
                              <i class="my-icon fa fa-chevron-down" (click)="onSortTableData($event)"></i>
                            </div>
                          </div>
                        </div>
                      </th>
                      <th scope="col">
                        <div class="d-flex align-items-center gap-2">
                          DEPARTMENT
                          <div>
                            <div>
                              <i class="my-icon fa fa-chevron-up" (click)="onSortTableData($event)"></i>
                            </div>
                            <div>
                              <i class="my-icon fa fa-chevron-down" (click)="onSortTableData($event)"></i>
                            </div>
                          </div>
                        </div>
                      </th>
                      <th scope="col">
                        <div class="d-flex align-items-center gap-2">
                          POSITION
                          <div>
                            <div>
                              <i class="my-icon fa fa-chevron-up" (click)="onSortTableData($event)"></i>
                            </div>
                            <div>
                              <i class="my-icon fa fa-chevron-down" (click)="onSortTableData($event)"></i>
                            </div>
                          </div>
                        </div>
                      </th>
                      <th scope="col">
                        <div class="d-flex align-items-center gap-2">
                          INVITES
                          <div>
                            <div>
                              <i class="my-icon fa fa-chevron-up" (click)="onSortTableData($event)"></i>
                            </div>
                            <div>
                              <i class="my-icon fa fa-chevron-down" (click)="onSortTableData($event)"></i>
                            </div>
                          </div>
                        </div>
                      </th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let user of usersPage | filter : searchText">
                      <td scope="row">

                        <i *ngIf="user.role === 'EMPLOYEE' || user.role === 'MANAGER'"
                          [ngClass]="{'pending-color': user.status == 'CREATED', 'progressing-color': user.status == 'IN_PROGRESS', 'finished-color': user.status == 'DONE'}"
                          class="bi bi-triangle-fill"></i>
                        <i *ngIf="user.role == 'APPLICANT'"
                          [ngClass]="{'pending-color': user.status == 'CREATED', 'progressing-color': user.status == 'IN_PROGRESS', 'finished-color': user.status == 'DONE'}"
                          class="bi bi-hexagon-fill"></i>
                      </td>

                      <td>{{ user.first_name }}</td>
                      <td>{{ user.last_name }}</td>
                      <td>{{ user.company.name }}</td>
                      <td>{{ user.department.name }}</td>
                      <td>{{ user.title }}</td>
                      <td>{{ user.invite }}</td>
                      <td>
                        <div class="d-flex align-items-center gap-3 justify-content-end">
                          <a *ngIf="
                              user.status === 'DONE' ||
                              user.status === 'IN_PROGRESS'
                            " href="">
                            <img height="13" width="13" src="../../../../assets/images/download.svg" alt="" />
                          </a>
                          <button type="reset" class="DeleteBtn" (click)="openConfirmationModal(template)">
                            <img src="../../../../assets/images/CrossIcon.png" alt="" />
                          </button>
                          <ng-template #template>
                            <div class="ConfirmationModel deleteModel">
                              <div class="modal-body">
                                {{"admin.users.deleteConfirm.text" | translate}}
                                <div class="ModelBtnPart">
                                  <button type="button" class="theme-btn w-auto" (click)="confirmDeleteDialog('id')">
                                    Ok
                                  </button>
                                  <button type="button" class="theme-btn w-auto" (click)="declineDeleteModal()">
                                    Cancel
                                  </button>
                                </div>
                              </div>
                            </div>
                          </ng-template>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>